{% extends 'base.html' %}
{% load static %}

{% block title %}Home | Sweet Spot{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero-section" style="background-image: url('{% static 'testapp/images/hero-bg.jpg' %}')">
        <div class="hero-content">
            <h1 class="hero-title">A Legacy of Passion & Purity</h1>
            <p class="hero-subtitle">It all began with a single pursuit: the perfect sweet. Today, that passion lives on in every bite.</p>
            <a href="{% url 'sweet_list' %}" class="btn btn-primary">Explore Our Craft</a>
        </div>
    </section>

    <!-- NEW "Sweet of the Week" Section -->
    {% if featured_sweet %}
    <section class="featured-sweet-section">
        <div class="section-header">
            <h2 class="section-title">Sweet of the Week</h2>
        </div>
        <div class="featured-sweet-wrapper">
            <div class="featured-sweet-image">
                <img src="{{ featured_sweet.image.url }}" alt="{{ featured_sweet.name }}">
            </div>
            <div class="featured-sweet-info">
                <h3 class="featured-sweet-title">{{ featured_sweet.name }}</h3>
                <p class="featured-sweet-description">{{ featured_sweet.description|truncatewords:30 }}</p>
                <p class="featured-sweet-price">Starting at ₹{{ featured_sweet.price }}</p>
                <a href="{% url 'sweet_detail' featured_sweet.id %}" class="btn btn-primary">View Details</a>
            </div>
        </div>
    </section>
    {% endif %}
    <!-- End of New Section -->

    <!-- Best Sellers Section -->
    <section class="best-sellers-section">
        <div class="section-header">
            <h2 class="section-title">Our Timeless Favorites</h2>
        </div>
        <div class="carousel-wrapper">
            <button class="carousel-arrow" id="scroll-left" aria-label="Scroll left"><i class="fas fa-chevron-left"></i></button>
            <div class="carousel-container" id="carousel-container">
                
                {% for sweet in best_sellers %}
                <div class="sweet-card">
                    <a href="{% url 'sweet_detail' sweet.id %}" class="card-image-link">
                        <div class="card-image-container">
                            <img src="{{ sweet.image.url }}" alt="{{ sweet.name }}">
                        </div>
                    </a>
                    <div class="card-info">
                        <h3>{{ sweet.name }}</h3>
                        <p class="price">₹{{ sweet.price }} / 250gm</p>
                        <a href="{% url 'sweet_detail' sweet.id %}" class="btn btn-secondary">View Details</a>
                    </div>
                </div>
                {% empty %}
                <p>No best sellers available at the moment.</p>
                {% endfor %}
                
            </div>
            <button class="carousel-arrow" id="scroll-right" aria-label="Scroll right"><i class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <!-- Other homepage sections (Features, About, Reviews, etc.) -->
    <section class="features-section">
        <div class="feature">
            <img src="{% static 'testapp/images/ingredients.jpg' %}" alt="Pure Ingredients">
            <h3>Purest Ingredients</h3>
            <p>Fresh milk, pure ghee, and nuts. No compromises, ever.</p>
        </div>
        <div class="feature">
            <img src="{% static 'testapp/images/craftsman.jpg' %}" alt="Master Craftsmen">
            <h3>Master Craftsmen</h3>
            <p>In the hands of our 'ustaads,' generations of wisdom come alive.</p>
        </div>
        <div class="feature">
            <img src="{% static 'testapp/images/recipe.jpg' %}" alt="Nurtured Recipes">
            <h3>Nurtured Recipes</h3>
            <p>Every sweet holds a memory, a tradition, and a taste of home.</p>
        </div>
    </section>

    <section id="about" class="about-section">
        <h2 class="section-title">Our Story: The Sweet Spot Legacy</h2>
        <p>Sweet Spot was born from a family's fascination with mithai. What started in a humble kitchen has grown into a beloved legacy, now led by the next generation with the same purpose: upholding trust, taste, and timeless celebration.</p>
    </section>
{% endblock %}

{% block scripts %}
<!-- This is the JavaScript for the homepage carousel -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    const carousel = document.getElementById('carousel-container');
    const scrollLeftBtn = document.getElementById('scroll-left');
    const scrollRightBtn = document.getElementById('scroll-right');

    if (carousel) {
        const scrollAmount = 320; // Scroll by card width + gap

        scrollLeftBtn.addEventListener('click', () => {
            carousel.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        });

        scrollRightBtn.addEventListener('click', () => {
            carousel.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        });
    }
});
</script>
{% endblock %}