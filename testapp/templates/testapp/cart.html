{% extends 'base.html' %}

{% block title %}Your Cart | Sweet Spot{% endblock %}

{% block content %}
<div class="page-wrapper cart-wrapper">
    <header class="page-header">
        Your Cart
    </header>
    
    {% if not cart_items %}
        <div class="cart-empty">
            <p>Your cart is empty.</p>
            <a href="{% url 'sweet_list' %}" class="btn btn-primary">Start Shopping</a>
        </div>
    {% else %}
        <!-- Cart Headers -->
        <div class="cart-item cart-header">
            <div>Item</div>
            <div>Quantity</div>
            <div>Price</div>
            <div></div> <!-- Empty header for remove button -->
        </div>

        <!-- Cart Items Loop -->
        {% for item in cart_items %}
            <div class="cart-item">
                <div class="cart-item-info">
                    <h3>{{ item.name }}</h3>
                    <p>{{ item.weight }}</p>
                </div>
                <div class="cart-item-qty">
                    <p>{{ item.quantity }}</p>
                </div>
                <div class="cart-item-price">
                    <strong>₹{{ item.total_price|floatformat:2 }}</strong>
                </div>
                <div class="cart-item-remove">
                    <a href="{% url 'remove_from_cart' item.item_id %}" class="btn-remove" aria-label="Remove item">
                        <i class="fas fa-times"></i>
                    </a>
                </div>
            </div>
        {% endfor %}
        
        <!-- Cart Total -->
        <div class="cart-total">
            Total: <span>₹{{ total_cart_price|floatformat:2 }}</span>
        </div>
        
        <!-- Cart Actions -->
        <div class="cart-actions">
            <a href="{% url 'sweet_list' %}" class="btn btn-secondary">Continue Shopping</a>
            <a href="{% url 'checkout' %}" class="btn btn-primary">Proceed to Checkout</a>
        </div>
    {% endif %}
</div>
{% endblock %}
