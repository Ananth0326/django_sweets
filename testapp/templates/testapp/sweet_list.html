{% extends 'base.html' %}

{% block title %}Our Sweets | Sweet Spot{% endblock %}

{% block content %}
<div class="page-wrapper">
    
    <!-- Category Filter Bar -->
    <div class="filter-container">
        <a href="{% url 'sweet_list' %}" class="filter-btn {% if not request.GET.category %}active{% endif %}">
            All Sweets
        </a>
        <a href="{% url 'sweet_list' %}?category=dryfruit" class="filter-btn {% if request.GET.category == 'dryfruit' %}active{% endif %}">
            Dry Fruit Sweets
        </a>
        <a href="{% url 'sweet_list' %}?category=milk" class="filter-btn {% if request.GET.category == 'milk' %}active{% endif %}">
            Milk Sweets
        </a>
        <a href="{% url 'sweet_list' %}?category=ghee" class="filter-btn {% if request.GET.category == 'ghee' %}active{% endif %}">
            Ghee Sweets
        </a>
        <a href="{% url 'sweet_list' %}?category=ragi" class="filter-btn {% if request.GET.category == 'ragi' %}active{% endif %}">
            Ragi Sweets
        </a>
        <a href="{% url 'sweet_list' %}?category=burfi_halwa" class="filter-btn {% if request.GET.category == 'burfi_halwa' %}active{% endif %}">
            Burfi & Halwa
        </a>
        <a href="{% url 'sweet_list' %}?category=sugarfree" class="filter-btn {% if request.GET.category == 'sugarfree' %}active{% endif %}">
            Sugar Free
        </a>
    </div>

    <!-- Page Header (Shows category or search result) -->
    <header class="page-header">
        {% if search_query %}
            Showing results for "{{ search_query }}"
        {% elif request.GET.category %}
            {{ request.GET.category|title }} Sweets
        {% else %}
            All Sweets
        {% endif %}
    </header>

    <!-- Sweet Grid -->
    <div class="sweet-grid">
        
        {% for sweet in sweets %}
        <div class="sweet-card">
            <a href="{% url 'sweet_detail' sweet.id %}" class="card-image-link">
                <div class="card-image-container">
                    <img src="{{ sweet.image.url }}" alt="{{ sweet.name }}">
                </div>
            </a>
            <div class="card-info">
                <h3>{{ sweet.name }}</h3>
                <p class="description">{{ sweet.description|truncatewords:20 }}</p>
                <p class="price">â‚¹{{ sweet.price }} / 250gm</p>
                <a href="{% url 'sweet_detail' sweet.id %}" class="btn btn-secondary">View Details</a>
            </div>
        </div>
        {% empty %}
            <p class="grid-empty-message">
              No sweets found. 
              {% if search_query %}
                Try a different search?
              {% else %}
                Check back soon!
              {% endif %}
              ðŸ˜”
            </p>
        {% endfor %}

    </div>
</div>
{% endblock %}